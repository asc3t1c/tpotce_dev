Compose now can delegate build to bake for better performances
Just set COMPOSE_BAKE=true
#0 building with "mybuilder" instance using docker-container driver

#1 [glutton internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.21kB 0.0s done
#1 DONE 0.0s

#2 [glutton linux/arm64 internal] load metadata for docker.io/library/golang:1.23-alpine
#2 ...

#3 [glutton linux/amd64 internal] load metadata for docker.io/library/golang:1.23-alpine
#3 DONE 0.2s

#2 [glutton linux/arm64 internal] load metadata for docker.io/library/golang:1.23-alpine
#2 DONE 0.2s

#4 [glutton linux/arm64 internal] load metadata for docker.io/library/alpine:3.20
#4 DONE 0.5s

#5 [glutton linux/amd64 internal] load metadata for docker.io/library/alpine:3.20
#5 DONE 0.5s

#6 [glutton internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s

#7 [glutton internal] load build context
#7 DONE 0.0s

#8 [glutton linux/arm64 stage-1 1/5] FROM docker.io/library/alpine:3.20@sha256:de4fe7064d8f98419ea6b49190df1abbf43450c1702eeb864fe9ced453c1cc5f
#8 resolve docker.io/library/alpine:3.20@sha256:de4fe7064d8f98419ea6b49190df1abbf43450c1702eeb864fe9ced453c1cc5f 0.1s done
#8 DONE 0.1s

#9 [glutton linux/amd64 builder 1/3] FROM docker.io/library/golang:1.23-alpine@sha256:f8113c4b13e2a8b3a168dceaee88ac27743cc84e959f43b9dbd2291e9c3f57a0
#9 resolve docker.io/library/golang:1.23-alpine@sha256:f8113c4b13e2a8b3a168dceaee88ac27743cc84e959f43b9dbd2291e9c3f57a0
#9 DONE 0.1s

#10 [glutton linux/arm64 builder 1/3] FROM docker.io/library/golang:1.23-alpine@sha256:f8113c4b13e2a8b3a168dceaee88ac27743cc84e959f43b9dbd2291e9c3f57a0
#10 resolve docker.io/library/golang:1.23-alpine@sha256:f8113c4b13e2a8b3a168dceaee88ac27743cc84e959f43b9dbd2291e9c3f57a0 0.1s done
#10 DONE 0.1s

#11 [glutton linux/amd64 stage-1 1/5] FROM docker.io/library/alpine:3.20@sha256:de4fe7064d8f98419ea6b49190df1abbf43450c1702eeb864fe9ced453c1cc5f
#11 resolve docker.io/library/alpine:3.20@sha256:de4fe7064d8f98419ea6b49190df1abbf43450c1702eeb864fe9ced453c1cc5f 0.1s done
#11 DONE 0.1s

#7 [glutton internal] load build context
#7 transferring context: 2.81kB 0.0s done
#7 DONE 0.0s

#12 [glutton linux/amd64 stage-1 3/5] COPY --from=builder /opt/glutton/config /opt/glutton/config
#12 CACHED

#13 [glutton linux/amd64 stage-1 4/5] RUN apk -U --no-cache upgrade && 	apk -U --no-cache add 		iptables 		libcap   		libpcap-dev && 		setcap cap_net_admin,cap_net_raw=+ep /opt/glutton/bin/server && 		setcap cap_net_admin,cap_net_raw=+ep /sbin/xtables-nft-multi && 		mkdir -p /var/log/glutton 		         /opt/glutton/payloads
#13 CACHED

#14 [glutton linux/amd64 builder 3/3] RUN apk --no-cache -U upgrade && 	apk -U --no-cache add 		make   		git 		g++ 		iptables-dev 		libpcap-dev &&     mkdir -p /opt/ &&     cd /opt/ &&     git clone https://github.com/mushorg/glutton &&     cd /opt/glutton/ &&     git checkout b3b5944b79893ccb1da19e112571674841bbe124 &&     cp /root/dist/system.go . &&     make build && 	cp /root/dist/*.yaml /opt/glutton/config/
#14 CACHED

#15 [glutton linux/amd64 builder 2/3] COPY dist/ /root/dist/
#15 CACHED

#16 [glutton linux/amd64 stage-1 2/5] COPY --from=builder /opt/glutton/bin /opt/glutton/bin
#16 CACHED

#17 [glutton linux/amd64 stage-1 5/5] WORKDIR /opt/glutton
#17 CACHED

#18 [glutton linux/arm64 builder 2/3] COPY dist/ /root/dist/
#18 CACHED

#19 [glutton linux/arm64 builder 3/3] RUN apk --no-cache -U upgrade && 	apk -U --no-cache add 		make   		git 		g++ 		iptables-dev 		libpcap-dev &&     mkdir -p /opt/ &&     cd /opt/ &&     git clone https://github.com/mushorg/glutton &&     cd /opt/glutton/ &&     git checkout b3b5944b79893ccb1da19e112571674841bbe124 &&     cp /root/dist/system.go . &&     make build && 	cp /root/dist/*.yaml /opt/glutton/config/
#19 0.554 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/aarch64/APKINDEX.tar.gz
#19 3.258 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/aarch64/APKINDEX.tar.gz
#19 9.582 OK: 8 MiB in 16 packages
#19 10.34 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/aarch64/APKINDEX.tar.gz
#19 11.90 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/aarch64/APKINDEX.tar.gz
#19 15.47 (1/36) Installing libgcc (14.2.0-r4)
#19 15.61 (2/36) Installing libstdc++ (14.2.0-r4)
#19 16.31 (3/36) Installing libstdc++-dev (14.2.0-r4)
#19 18.68 (4/36) Installing jansson (2.14-r4)
#19 18.73 (5/36) Installing zstd-libs (1.5.6-r2)
#19 18.98 (6/36) Installing binutils (2.43.1-r1)
#19 20.79 (7/36) Installing libgomp (14.2.0-r4)
#19 20.96 (8/36) Installing libatomic (14.2.0-r4)
#19 21.00 (9/36) Installing gmp (6.3.0-r2)
#19 21.18 (10/36) Installing isl26 (0.26-r1)
#19 21.71 (11/36) Installing mpfr4 (4.2.1-r0)
#19 21.91 (12/36) Installing mpc1 (1.3.1-r1)
#19 21.96 (13/36) Installing gcc (14.2.0-r4)
#19 38.38 (14/36) Installing musl-dev (1.2.5-r9)
#19 39.97 (15/36) Installing g++ (14.2.0-r4)
#19 52.23 (16/36) Installing brotli-libs (1.1.0-r2)
#19 52.47 (17/36) Installing c-ares (1.34.3-r0)
#19 52.86 (18/36) Installing libunistring (1.2-r0)
#19 53.44 (19/36) Installing libidn2 (2.3.7-r0)
#19 53.59 (20/36) Installing nghttp2-libs (1.64.0-r0)
#19 53.66 (21/36) Installing libpsl (0.21.5-r3)
#19 53.70 (22/36) Installing libcurl (8.12.1-r0)
#19 53.87 (23/36) Installing libexpat (2.6.4-r0)
#19 53.93 (24/36) Installing pcre2 (10.43-r0)
#19 54.19 (25/36) Installing git (2.47.2-r0)
#19 56.24 (26/36) Installing git-init-template (2.47.2-r0)
#19 56.27 (27/36) Installing linux-headers (6.6-r1)
#19 57.46 (28/36) Installing libip4tc (1.8.11-r1)
#19 57.50 (29/36) Installing libip6tc (1.8.11-r1)
#19 57.53 (30/36) Installing libipq (1.8.11-r1)
#19 57.55 (31/36) Installing libxtables (1.8.11-r1)
#19 57.59 (32/36) Installing pkgconf (2.3.0-r0)
#19 57.64 (33/36) Installing iptables-dev (1.8.11-r1)
#19 57.68 (34/36) Installing libpcap (1.10.5-r0)
#19 57.77 (35/36) Installing libpcap-dev (1.10.5-r0)
#19 57.89 (36/36) Installing make (4.4.1-r2)
#19 57.98 Executing busybox-1.37.0-r12.trigger
#19 58.20 OK: 239 MiB in 52 packages
#19 58.87 Cloning into 'glutton'...
#19 62.25 Note: switching to 'b3b5944b79893ccb1da19e112571674841bbe124'.
#19 62.25 
#19 62.25 You are in 'detached HEAD' state. You can look around, make experimental
#19 62.25 changes and commit them, and you can discard any commits you make in this
#19 62.25 state without impacting any branches by switching back to a branch.
#19 62.25 
#19 62.25 If you want to create a new branch to retain commits you create, you may
#19 62.25 do so (now or later) by using -c with the switch command. Example:
#19 62.25 
#19 62.25   git switch -c <new-branch-name>
#19 62.25 
#19 62.25 Or undo this operation with:
#19 62.25 
#19 62.25   git switch -
#19 62.25 
#19 62.25 Turn off this advice by setting config variable advice.detachedHead to false
#19 62.25 
#19 62.26 HEAD is now at b3b5944 custom ssh port (#164)
#19 62.65 go build -ldflags="-X \"main.VERSION=glutton version v1.0.1+b3b5944\" -X \"main.BUILDDATE=2025-02-25T10:07:58+00:00\"" -o bin/server app/server.go
#19 63.59 go: downloading github.com/spf13/pflag v1.0.5
#19 63.62 go: downloading github.com/spf13/viper v1.18.2
#19 64.44 go: downloading github.com/coreos/go-iptables v0.7.0
#19 65.07 go: downloading github.com/glaslos/lsof v0.0.0-20230723212405-b3baf9409e4b
#19 65.48 go: downloading github.com/google/gopacket v1.1.19
#19 65.83 go: downloading github.com/google/uuid v1.6.0
#19 66.01 go: downloading github.com/seud0nym/tproxy-go v0.0.0-20230917034616-0c6325a61e88
#19 68.25 go: downloading github.com/jedib0t/go-pretty/v6 v6.5.9
#19 69.39 go: downloading github.com/fsnotify/fsnotify v1.7.0
#19 69.40 go: downloading github.com/mitchellh/mapstructure v1.5.0
#19 69.55 go: downloading github.com/sagikazarmark/slog-shim v0.1.0
#19 69.72 go: downloading github.com/spf13/afero v1.11.0
#19 69.84 go: downloading github.com/spf13/cast v1.6.0
#19 70.00 go: downloading github.com/d1str0/hpfeeds v0.1.6
#19 70.11 go: downloading gopkg.in/natefinch/lumberjack.v2 v2.2.1
#19 70.29 go: downloading gopkg.in/yaml.v2 v2.4.0
#19 70.57 go: downloading golang.org/x/sys v0.20.0
#19 70.99 go: downloading github.com/mattn/go-runewidth v0.0.15
#19 71.03 go: downloading github.com/subosito/gotenv v1.6.0
#19 71.27 go: downloading gopkg.in/ini.v1 v1.67.0
#19 71.29 go: downloading github.com/magiconair/properties v1.8.7
#19 71.57 go: downloading github.com/pelletier/go-toml/v2 v2.2.2
#19 72.00 go: downloading gopkg.in/yaml.v3 v3.0.1
#19 72.00 go: downloading github.com/hashicorp/hcl v1.0.0
#19 73.14 go: downloading github.com/ghettovoice/gosip v0.0.0-20240401112151-56d750b16008
#19 73.93 go: downloading golang.org/x/text v0.15.0
#19 88.90 go: downloading github.com/rivo/uniseg v0.4.7
#19 89.35 go: downloading github.com/sirupsen/logrus v1.9.3
#19 89.39 go: downloading github.com/x-cray/logrus-prefixed-formatter v0.5.2
#19 89.45 go: downloading github.com/satori/go.uuid v1.2.1-0.20181028125025-b2ce2384e17b
#19 89.53 go: downloading github.com/tevino/abool v1.2.0
#19 89.90 go: downloading github.com/mgutz/ansi v0.0.0-20200706080929-d51e80ef957d
#19 89.92 go: downloading golang.org/x/crypto v0.23.0
#19 90.48 go: downloading github.com/mattn/go-colorable v0.1.13
#19 90.60 go: downloading github.com/mattn/go-isatty v0.0.20
#19 92.48 go: downloading golang.org/x/term v0.20.0
