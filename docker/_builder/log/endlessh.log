Compose now can delegate build to bake for better performances
Just set COMPOSE_BAKE=true
#0 building with "mybuilder" instance using docker-container driver

#1 [endlessh internal] load build definition from Dockerfile
#1 transferring dockerfile: 654B 0.0s done
#1 DONE 0.0s

#2 [endlessh linux/amd64 internal] load metadata for docker.io/library/alpine:3.16
#2 ...

#3 [endlessh linux/arm64 internal] load metadata for docker.io/library/alpine:3.20
#3 DONE 0.5s

#4 [endlessh linux/arm64 internal] load metadata for docker.io/library/alpine:3.16
#4 DONE 0.5s

#2 [endlessh linux/amd64 internal] load metadata for docker.io/library/alpine:3.16
#2 DONE 0.5s

#5 [endlessh linux/amd64 internal] load metadata for docker.io/library/alpine:3.20
#5 DONE 0.5s

#6 [endlessh internal] load .dockerignore
#6 transferring context: 2B 0.0s done
#6 DONE 0.0s

#7 [endlessh internal] load build context
#7 DONE 0.0s

#8 [endlessh linux/amd64 stage-1 1/4] FROM docker.io/library/alpine:3.20@sha256:de4fe7064d8f98419ea6b49190df1abbf43450c1702eeb864fe9ced453c1cc5f
#8 resolve docker.io/library/alpine:3.20@sha256:de4fe7064d8f98419ea6b49190df1abbf43450c1702eeb864fe9ced453c1cc5f 0.0s done
#8 DONE 0.0s

#9 [endlessh linux/arm64 builder 1/3] FROM docker.io/library/alpine:3.16@sha256:452e7292acee0ee16c332324d7de05fa2c99f9994ecc9f0779c602916a672ae4
#9 resolve docker.io/library/alpine:3.16@sha256:452e7292acee0ee16c332324d7de05fa2c99f9994ecc9f0779c602916a672ae4
#9 resolve docker.io/library/alpine:3.16@sha256:452e7292acee0ee16c332324d7de05fa2c99f9994ecc9f0779c602916a672ae4 0.0s done
#9 DONE 0.0s

#10 [endlessh linux/amd64 builder 1/3] FROM docker.io/library/alpine:3.16@sha256:452e7292acee0ee16c332324d7de05fa2c99f9994ecc9f0779c602916a672ae4
#10 resolve docker.io/library/alpine:3.16@sha256:452e7292acee0ee16c332324d7de05fa2c99f9994ecc9f0779c602916a672ae4 0.0s done
#10 DONE 0.0s

#11 [endlessh linux/arm64 stage-1 1/4] FROM docker.io/library/alpine:3.20@sha256:de4fe7064d8f98419ea6b49190df1abbf43450c1702eeb864fe9ced453c1cc5f
#11 resolve docker.io/library/alpine:3.20@sha256:de4fe7064d8f98419ea6b49190df1abbf43450c1702eeb864fe9ced453c1cc5f 0.0s done
#11 DONE 0.0s

#7 [endlessh internal] load build context
#7 transferring context: 917B 0.0s done
#7 DONE 0.0s

#12 [endlessh linux/arm64 stage-1 2/4] RUN apk --no-cache -U upgrade
#12 CACHED

#13 [endlessh linux/arm64 builder 2/3] COPY dist/ /root/dist/
#13 CACHED

#14 [endlessh linux/arm64 stage-1 3/4] COPY --from=builder /root/dist/* /opt/endlessh/
#14 CACHED

#15 [endlessh linux/arm64 builder 3/3] RUN apk -U add --no-cache 		build-base 		git 		libcap &&     git clone https://github.com/skeeto/endlessh /opt/endlessh &&     cd /opt/endlessh &&     git checkout dfe44eb2c5b6fc3c48a39ed826fe0e4459cdf6ef &&     make &&     mv /opt/endlessh/endlessh /root/dist
#15 CACHED

#16 [endlessh linux/arm64 stage-1 4/4] WORKDIR /opt/endlessh/
#16 CACHED

#17 [endlessh linux/amd64 stage-1 2/4] RUN apk --no-cache -U upgrade
#17 CACHED

#18 [endlessh linux/amd64 builder 2/3] COPY dist/ /root/dist/
#18 CACHED

#19 [endlessh linux/amd64 builder 3/3] RUN apk -U add --no-cache 		build-base 		git 		libcap &&     git clone https://github.com/skeeto/endlessh /opt/endlessh &&     cd /opt/endlessh &&     git checkout dfe44eb2c5b6fc3c48a39ed826fe0e4459cdf6ef &&     make &&     mv /opt/endlessh/endlessh /root/dist
#19 CACHED

#20 [endlessh linux/amd64 stage-1 3/4] COPY --from=builder /root/dist/* /opt/endlessh/
#20 CACHED

#21 [endlessh linux/amd64 stage-1 4/4] WORKDIR /opt/endlessh/
#21 CACHED

#22 [endlessh] exporting to image
#22 exporting layers done
#22 exporting manifest sha256:e81c622e539864a75d2bc6bf8a9fda65c148fe611885dcb14cab73da4d23dd69 done
#22 exporting config sha256:ee603e6402f52870f0a0d8b202ccea3de9e99a7286169bf083f24ee531cb3608 done
#22 exporting attestation manifest sha256:9c829067f4f2857f09c20086662784b46732ba0ac6ee0ccf7251afdbed36f651 0.0s done
#22 exporting manifest sha256:5d05fbe16feb04b2198ae656da2dbaed7f9bf571fa75d6b1995304f1ab8e8879 0.0s done
#22 exporting config sha256:0594a559ddc83bba289364520a022c1c18d6edc8c73a61285063a09b4bd1871c
#22 exporting config sha256:0594a559ddc83bba289364520a022c1c18d6edc8c73a61285063a09b4bd1871c 0.0s done
#22 exporting attestation manifest sha256:114e0739b3b21487dac11b0145d716ae372e9e99698e79c4dbd9a932339e40d9 0.0s done
#22 exporting manifest list sha256:1cd69c71b787b7e2ad49950fa932ecb6b7f10250c28432ce09414b3c248dec9f 0.0s done
#22 pushing layers
#22 ...

#23 [endlessh auth] f0rc3ps/endlessh:pull,push token for registry-1.docker.io
#23 DONE 0.0s

#22 [endlessh] exporting to image
#22 pushing layers 1.8s done
#22 pushing manifest for docker.io/f0rc3ps/endlessh:24.04.1@sha256:1cd69c71b787b7e2ad49950fa932ecb6b7f10250c28432ce09414b3c248dec9f
#22 pushing manifest for docker.io/f0rc3ps/endlessh:24.04.1@sha256:1cd69c71b787b7e2ad49950fa932ecb6b7f10250c28432ce09414b3c248dec9f 2.6s done
#22 ...

#24 [endlessh auth] asc3t1c/endlessh:pull,push token for ghcr.io
#24 DONE 0.0s

#22 [endlessh] exporting to image
#22 pushing layers 1.6s done
#22 pushing manifest for ghcr.io/asc3t1c/endlessh:24.04.1@sha256:1cd69c71b787b7e2ad49950fa932ecb6b7f10250c28432ce09414b3c248dec9f
#22 pushing manifest for ghcr.io/asc3t1c/endlessh:24.04.1@sha256:1cd69c71b787b7e2ad49950fa932ecb6b7f10250c28432ce09414b3c248dec9f 2.1s done
#22 DONE 8.2s

#25 [endlessh] resolving provenance for metadata file
#25 DONE 0.0s
